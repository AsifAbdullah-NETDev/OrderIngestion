CREATE TABLE Customers (
    CustomerId INT IDENTITY PRIMARY KEY,
    Name NVARCHAR(200) NOT NULL,
    Email NVARCHAR(200) NOT NULL UNIQUE
);

CREATE TABLE Orders (
    OrderId INT IDENTITY PRIMARY KEY,
    RequestId UNIQUEIDENTIFIER NOT NULL UNIQUE,
    OrderNumber NVARCHAR(50) NOT NULL,
    CustomerId INT NOT NULL,
    CreatedAt DATETIME2 NOT NULL DEFAULT GETUTCDATE(),
    FOREIGN KEY (CustomerId) REFERENCES Customers(CustomerId)
);

CREATE TABLE OrderItems (
    OrderItemId INT IDENTITY PRIMARY KEY,
    OrderId INT NOT NULL,
    SKU NVARCHAR(50) NOT NULL,
    Quantity INT NOT NULL,
    Price DECIMAL(18,2) NOT NULL,
    FOREIGN KEY (OrderId) REFERENCES Orders(OrderId)
);
